#include <Arduino_GFX_Library.h>
#include <GfxUi.h>
#include <ConcertOne_Regular9pt7b.h>

// Define pins for ST7735
#define TFT_CS 10    // Chip Select
#define TFT_RST 21   // Reset
#define TFT_DC 47    // Data/Command
#define TFT_MOSI 11  // MOSI (Data)
#define TFT_SCK 12   // Clock

// Initialize Arduino_GFX
Arduino_DataBus *bus = new Arduino_ESP32SPI(TFT_DC, TFT_CS, TFT_SCK, TFT_MOSI);
Arduino_GFX *gfx = new Arduino_ST7735(bus, TFT_RST, 1 /* rotation */, false /* IPS */, 128 /* width */, 160 /* height */, 0 /* col offset */, 0 /* row offset */, 0, 0, false);

GfxUi gfxui(gfx);

float count = 0;

const char *anim_startup_hello[] PROGMEM = {
  "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
  "wAAA4AAAAGAAAHAAAAAwAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAYAAAAAAAADAAAAAAAAAYAAAAAAAADAAAAAAAAAAAAAAAwAAAAAAAAGAAAAAAAABwAAAAAAAAMAAAAAAAAAAABwAAAAAAAAOAA",
  "wAAA+AAAAGAAAH4AAAAwAAAHAAAAGAAAAYAAAAwAAADAAAAGAAAAYAAAAwAAADAAAAGAAAAAAAAAwAAAAAAAAGAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAYAAAAAAAADAAAAAAAAAYAAAAAAAMDAAAAAAABgYAAAAAwAMDAAAAAGABgYAAAABwAMDgAAAAMABwMAAAAfgAPwAAAAD4AA+AA",
  "wAAA+AAAAGAAAH4AAAAwAAAHAAAAGAAAAYAAAAwAAADAAAAGAAAAYAAAAwAAADAAAAGAAAAYAAAAwAAADAAAAGAAAAYAAAAwAAADAAAAGAAAAYAAAAwAAADAAAAGAAAAYAAAAwAAADAAAAGAAAAYAAAAwAAADAAAAGAAAAYBgAAwAAAAAMAAGAAAAABgAAwAAAAAMDAGAAAAABgYAwAAAAAMDAGAAAAABgYAwAGAAAMDAGAAwAABgYAAAGAwAMDAAAAwGABgYDAAHBwAMDg4AAYMABwMGAAD/gAPx/wAAP4AA+H8",
  "wAAA+AAAAGAAAH4AAAAwAAAHAAAAGAAAAYAAAAwAAADAAAAGAAAAYAAAAwAAADAAAAGAAAAYAAAAwAAADAAAAGAAAAYAAAAwAAADAAAAGAAAAYAAAAwAAADAMAAGAAAAYBgAAwAAADAMAAGAAAAYBgAAwAAADAMAAGAAAAYBgAAwAGADAMAAGAAwAYBgAAwAGADAMDAeAAwAYBgYDwAGADAMDAeAAwAYBgYDwAGAAAMDAeAAwAABgYDwAGAwAMDAeAAwGABgYDwAHBwAMDg+AAYMABwMGwAD/gAPx/2AAP4AA+H8",
  "wAAA+AAAAGAAAH4BgAAwAAAHAMAAGAAAAYBgAAwAAADAMAAGAAAAYBgAAwAAADAMAAGAAAAYBgAAwAAADAMAAGAAAAYBgAAwAAADAMAAGAAAAYBgAAwAAADAMAAGfAGAYBgA434BwDAMAHnwAcAYBgAO8AHADAMAA+AA+AYBgADwAHwDAMAAeAAwAYBgADwAGADAMDAeAAwAYBgYDwAGADAMDAeAAwAYBgYDwAGADAMDAeAAwAYBgYDwAGAzAMDAeAAwGYBgYDwAHBzAMDg+AAYMYBwMGwAD/jAPx/2AAP4AA+H8",
  "wAAA+A4AAGAAAH4HgAAwAAAHAcAAGAAAAYBgAAwAAADAMAAGAAAAYBgAAwAAADAMAAGAAAAYBgAAwAAADAMAAGAAAAYBgAAwAAADAMAAGAAAAYBgAAwAAADAMAAGfgHwYBgD43+B/DAMA/nw4cYYBgOO8DnADAMDg+AM/4YBgYDwBn/DAMDAeAMwAYBgADwBmADAMDAeAMwAYBgYDwBmADAMDAeAMwAYBgYDwAGADAMDAeAAwAYBgYDwAGAzAMDAeAAwGYBgYDwAHBzAMDg+AAYMcBwMGwAD/j4Px/2AAP4PA+H8",
  "wAAA+D4AAGAAAH4fgAAwAAAHAcAAGAAAAYBgAAwAAADAMAAGAAAAYBgAAwAAADAMAAGAAAAYBgAAwAAADAMAAGAAAAYBgAAwAAADAMAAGAAAAYBgAAwAAADAMAAGfgHwYBgD43+B/DAMA/nw4ccYBgOO8DnBzAMDg+AM/+YBgYDwBn/zAMDAeAMwAYBgYDwBmADAMDAeAMwAYBgYDwBmADAMDAeAMwAYBgYDwBmADAMDAeAMwAYBgYDwBmAzAMDAeAMwGYBgYDwBnBzAMDg+AMYMcBwMGwBj/j+Px/2AMP4Pw+H8"
};
const char *animcolor_gameboy[] PROGMEM = {
  "///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8AAAAVf////////////////////BVVVQVf///////////////////8aqqqRV////////////////////xvqr5FX////////////////////G+qvkVf///////////////////8aqqqRV////////////////////xuqq5FX////////////////////Gv/+kVf///////////////////8aqqqRV////////////////////wVVVUFX////////////////////AAAAAVf///////////////////8AAAABV////////////////////wWAAWFX////////////////////FWABYVf///////////////////8VYAABV////////////////////wWAFgFX////////////////////AAAWAVf///////////////////8REAABV////////////////////wREAAF/////////////////////wAAABX//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8=",
  "//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wAAABV////////////////////8FVVVBV////////////////////xqqqpFX////////////////////GqqqkVf///////////////////8b6q+RV////////////////////xqqqpFX////////////////////G6qrkVf///////////////////8a//6RV////////////////////wVVVUFX////////////////////AAAAAVf///////////////////8AAAABV////////////////////wWAAWFX////////////////////FWABYVf///////////////////8VYAABV////////////////////wWAFgFX////////////////////AAAWAVf///////////////////8REAABV////////////////////wREAAF/////////////////////wAAABX//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8=",
  "///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8AAAAVf////////////////////BVVVQVf///////////////////8aqqqRV////////////////////xu6u5FX////////////////////GuqukVf///////////////////8aqqqRV////////////////////xqqqpFX////////////////////G///kVf///////////////////8aqqqRV////////////////////wVVVUFX////////////////////AAAAAVf///////////////////8AAAABV////////////////////wWAAWFX////////////////////FWABYVf///////////////////8VYAABV////////////////////wWAFgFX////////////////////AAAWAVf///////////////////8REAABV////////////////////wREAAF/////////////////////wAAABX//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8=",
  "///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8AAAAVf////////////////////BVVVQVf///////////////////8aqqqRV////////////////////xu6u5FX////////////////////GuqukVf///////////////////8aqqqRV////////////////////xqqqpFX////////////////////Gr/6kVf///////////////////8aqqqRV////////////////////wVVVUFX////////////////////AAAAAVf///////////////////8AAAABV////////////////////wWAAWFX////////////////////FWABYVf///////////////////8VYAABV////////////////////wWAFgFX////////////////////AAAWAVf///////////////////8REAABV////////////////////wREAAF/////////////////////wAAABX//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8=",
  "//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////q//////////////////////////v/////////////////////////6v//////////////////////////8AAAAVf////////////////////BVVVQVf///////////////////8aqqqRV////////////////////xu6u5FX////////////////////GuuukVf///////////////////8aruqRV////////////////////xqu6pFX////////////////////GquqkVf///////////////////8aqqqRV////////////////////wVVVUFX////////////////////AAAAAVf///////////////////8AAAABV////////////////////wWAAWFX////////////////////FWABYVf///////////////////8VYAABV////////////////////wWAFgFX////////////////////AAAWAVf///////////////////8REAABV////////////////////wREAAF/////////////////////wAAABX//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8=",
  "/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+r//////////////////////////v/////////////////////////7/////////////////////////+//////////////////////////6vq//////////////////////////v/////////////////////////6v//////////////////////////8AAAAVf////////////////////BVVVQVf///////////////////8aqqqRV////////////////////xu6u5FX////////////////////GuuukVf///////////////////8aruqRV////////////////////xqu6pFX////////////////////GquqkVf///////////////////8aqqqRV////////////////////wVVVUFX////////////////////AAAAAVf///////////////////8AAAABV////////////////////wWAAWFX////////////////////FWABYVf///////////////////8VYAABV////////////////////wWAFgFX////////////////////AAAWAVf///////////////////8REAABV////////////////////wREAAF/////////////////////wAAABX//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8=",
  "//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////qq//////////////////////////v/////////////////////////7/////////////////////////+//////////////////////////v///////////////////////+r6qv///////////////////////v/////////////////////////7/////////////////////////+//////////////////////////6vq//////////////////////////v/////////////////////////6v//////////////////////////8AAAAVf////////////////////BVVVQVf///////////////////8aqqqRV////////////////////xu6u5FX////////////////////GuuukVf///////////////////8aruqRV////////////////////xqu6pFX////////////////////GquqkVf///////////////////8aqqqRV////////////////////wVVVUFX////////////////////AAAAAVf///////////////////8AAAABV////////////////////wWAAWFX////////////////////FWABYVf///////////////////8VYAABV////////////////////wWAFgFX////////////////////AAAWAVf///////////////////8REAABV////////////////////wREAAF/////////////////////wAAABX//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8=",
  "//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wAAABV////////////////////8FVVVBV////////////////////xqqqpFX////////////////////GqqqkVf///////////////////8b6q+RV////////////////////xqrqpFX////////////////////GuuukVf///////////////////8avvqRV////////////////////wVVVUFX////////////////////AAAAAVf///////////////////8AAAABV////////////////////wWAAWFX////////////////////FWABYVf///////////////////8VYAABV////////////////////wWAFgFX////////////////////AAAWAVf///////////////////8REAABV////////////////////wREAAF/////////////////////wAAABX//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8=",
  "//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wAAABV////////////////////8FVVVBV////////////////////xqqqpFX////////////////////GqqqkVf///////////////////8b6q+RV////////////////////xqrqpFX////////////////////GuuukVf///////////////////8avvqRV////////////////////wVVVUFX////////////////////AAAAAVf///////////////////8AAAABV////////////////////wWAAWFX////////////////////FWABYVf///////////////////8VYAABV////////////////////wWAFgFX////////////////////AAAWAVf///////////////////8REAABV////////////////////wREAAF/////////////////////wAAABX//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8=",
  "///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8AAAAVf////////////////////BVVVQVf///////////////////8aqqqRV////////////////////xvqr5FX////////////////////G+qvkVf///////////////////8aqqqRV////////////////////xuqq5FX////////////////////Gv/+kVf///////////////////8aqqqRV////////////////////wVVVUFX////////////////////AAAAAVf///////////////////8AAAABV////////////////////wWAAWFX////////////////////FWABYVf///////////////////8VYAABV////////////////////wWAFgFX////////////////////AAAWAVf///////////////////8REAABV////////////////////wREAAF/////////////////////wAAABX//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8="
};
void setup() {
  Serial.begin(115200);

  gfx->begin();
  gfx->setFont(&ConcertOne_Regular9pt7b);
  gfx->setTextWrap(false);

  gfx->fillScreen(BLACK);

  // gfxui.setAnimation(animcolor_gameboy, 10);
  gfxui.setAnimation(anim_startup_hello, 8);
  gfxui.setAnimationDuration(100);
}

void loop() {
  if (gfxui.stopAnimation) {
    gfx->fillScreen(gfx->color565(0, 0, 0));
  }

  // gfxui.drawBitmap(CENTER, CENTER, icon_back, 20, 20, true);
  gfxui.stopAnimation = true;
  gfxui.playSyncAnimation(CENTER, CENTER, 57, 32, true);
  // gfxui.playAsyncAnimation(CENTER, CENTER, 57, 32, true, true);

  Serial.println(gfxui.stopAnimation);

  // gfxui.drawBitmapColor(0, 0, color_test, 2, 80, 64, false);
  // gfxui.playSyncAnimationColor(0, 0, 80, 64, 2, true);
  // gfxui.playAsyncAnimationColor(0, 0, 80, 64, 2, true, false);

  // // Draw text
  // gfx->setTextColor(0xFFFF);
  // gfx->setTextSize(0.5);
  // gfx->setCursor(30, 0);
  // gfx->println("Hello");

  // gfx->setTextColor(0xFFFF);
  // gfx->setTextSize(1);
  // gfx->setCursor(30, 30);
  // gfx->println("1 " + String(count));

  // gfx->setTextColor(0xFFFF);
  // gfx->setTextSize(2);
  // gfx->setCursor(30, 80);
  // gfx->println("2 " + String(count));

  // const char *text = "Hello, World!";

  // uint16_t textWidth = gfxui.getStringWidth(text);
  // uint16_t textHeight = gfxui.getStringHeight(text);

  // gfxui.drawTextCanva(CENTER, CENTER, FIT_TEXT, FIT_TEXT, 3, "Hello, World!", WHITE, WHITE);
  // gfxui.drawTextCanva(0, 0, 200, 10, 3, "Hello, World!", WHITE, WHITE);

  // // gfxui.drawProgressBar(0, 0, 100, 20, count, 3, WHITE);

  // Serial.println(count);

  // int stepLimit = 10;

  // gfxui.drawScrollBar(gfx->width() - 12, CENTER, 10, gfx->height() - 2, stepLimit, count, 3, WHITE);

  // gfxui.drawBitmap(CENTER, CENTER, bitmap, 32, 32, TRANS);

  // Serial.println(count);
  // count++;
  // if (count > 200) {
  //   gfxui.stopAnimation = true;
  // }

  if (gfxui.stopAnimation) {
    delay(500);
  }
}